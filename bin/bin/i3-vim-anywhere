#!/bin/bash

TMP_FILE="$(mktemp)"

function start_vim() {
     i3-sensible-terminal -e vim "$1"
}

function paste_text() {
     cat "$1" | xclip -sel "clip"
     xdotool key ctrl+v
}

trap "rm -f \"$TMP_FILE\"" EXIT
start_vim "$TMP_FILE"

if [ ! -s "$TMP_FILE" ]; then
     exit 1
else
     paste_text "$TMP_FILE"
fi

exit 0
